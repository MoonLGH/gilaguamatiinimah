<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>SMAN 1 CIKAMPEK - ABSEN</title>
   <link rel="stylesheet" href="./assets/css/main.css">
   <link rel="shortcut icon" href="./assets/img/Logosaci.png" type="image/x-icon">
   <script src="../node_modules/flowbite/dist/flowbite.js"></script>
   <script src="./assets/js/index.js" defer></script>
   <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Francois+One&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>


<body class="flex items-center justify-center min-h-screen bg-gray-100">
    <div class="w-full max-w-lg p-8 bg-white shadow-lg rounded-lg">
        <h2 class="text-2xl font-semibold text-center text-gray-800 mb-6">Pilih Nominasi</h2>
        <form id="nominationForm" class="space-y-4">
            <div>
                <label for="category" class="block text-gray-700 font-medium">Kategori</label>
                <select id="category" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="">Pilih Kategori</option>
                    <option value="terlucu">Terlucu</option>
                    <option value="terpopuler">Terpopuler</option>
                </select>
            </div>
            <div>
                <label for="class" class="block text-gray-700 font-medium">Kelas</label>
                <select id="class" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="">Pilih Kelas</option>
                </select>
            </div>
            <div>
                <label for="name" class="block text-gray-700 font-medium">Nama</label>
                <select id="name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <option value="">Pilih Nama</option>
                </select>
            </div>
            <button type="submit" class="w-full py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700">Submit</button>
        </form>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('http://localhost:5000/api/all')
                .then(response => response.json())
                .then(data => {
                    const classSelect = document.getElementById('class');
                    const nameSelect = document.getElementById('name');
                    
                    const classes = [...new Set(data.map(item => item.kelas))];
                    classes.forEach(kelas => {
                        let option = document.createElement('option');
                        option.value = kelas;
                        option.textContent = kelas;
                        classSelect.appendChild(option);
                    });
                    
                    classSelect.addEventListener('change', function() {
                        nameSelect.innerHTML = '<option value="">Pilih Nama</option>';
                        const selectedClass = this.value;
                        const filteredNames = data.filter(item => item.kelas === selectedClass);
                        filteredNames.forEach(item => {
                            let option = document.createElement('option');
                            option.value = item.nama;
                            option.textContent = item.nama;
                            nameSelect.appendChild(option);
                        });
                    });
                });
        });

        document.getElementById('nominationForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const category = document.getElementById('category').value;
            const kelas = document.getElementById('class').value;
            const name = document.getElementById('name').value;
            
            fetch('http://localhost:5000/api/nominate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ category, kelas, name })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Nominasi berhasil dikirim!');
                } else {
                    alert('Gagal mengirim nominasi.');
                }
            })
            .catch(error => console.error('Error:', error));
        });
    </script>
</body>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
    var swiper = new Swiper('.swiper-container', {
        slidesPerView: 1,
        spaceBetween: 10,
        pagination: {
            el: '.swiper-pagination',
            clickable: true,
        },
        breakpoints: {
            640: {
                slidesPerView: 2,
                spaceBetween: 20,
            },
            768: {
                slidesPerView: 3,
                spaceBetween: 30,
            },
            1024: {
                slidesPerView: 4,
                spaceBetween: 40,
            },
        },
    });
</script>
<!-- PLACEHOLDER -->


</html>